---
import "../styles/global.css";

import CalGrid from "../svg/calendar-grid.svg";
import ActivitySvg from "../svg/activity.svg";

import Card from "../components/Card.astro";
import BaseNav from "../components/BaseNav.astro";
import CardHorizontal from "../components/CardHorizontal.astro";
import CardDate from "../components/CardDate.astro";
import Resizer from "../components/Resizer.astro";
import Header from "../components/Header.astro";
import Panel from "../components/Panel.astro";
import Filter from "../components/Filter.astro";
import SectionHeader from "../components/SectionHeader.astro";
import CardFrame from "../components/CardFrame.astro";
import CardContent from "../components/CardContent.astro";
import StackContent from "../components/StackContent.astro";
import LayoutGrid from "../components/LayoutGrid.astro";
import LayoutStack from "../components/LayoutStack.astro";
import EmptyState from "../components/EmptyState.astro";
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="robots" content="noindex, nofollow" />
    <meta name="generator" content={Astro.generator} />
    <title>Command Center</title>
  </head>
  <body>
    <BaseNav />

    <section class="dump">
      <Header title="Grant Prototype" />
      <section class="top-area">
        <LayoutGrid>
          <CardFrame isPinned>
            <CardContent title="Hello" />
          </CardFrame>
          <CardFrame isStack>
            <StackContent />
          </CardFrame>
          <CardFrame isPinned>
            <CardContent />
          </CardFrame>
          <CardFrame isPinned>
            <CardContent />
          </CardFrame>
          <CardFrame isPinned>
            <CardContent />
          </CardFrame>
        </LayoutGrid>
      </section>

      <Resizer>
        <!-- <Fragment slot="pinned">
          <CardFrame>
            <CardContent />
          </CardFrame>
          <CardFrame>
            <CardContent />
          </CardFrame>
          <CardFrame>
            <CardContent />
          </CardFrame>
        </Fragment> -->

        <Fragment slot="recents">
          <!-- <div class="grid--vertical">
            <CardHorizontal />
            <CardHorizontal />
            <CardHorizontal />
          </div> -->
          <LayoutStack>
            <h1>Recent Projects</h1>
            <LayoutStack>
              <SectionHeader align="left" title="today" />
              <CardHorizontal />
              <CardHorizontal />
              <CardHorizontal />
              <CardHorizontal />
              <CardHorizontal />
              <CardHorizontal />
            </LayoutStack>
            <LayoutStack>
              <SectionHeader align="left" title="yesterday" />
              <CardHorizontal />
              <CardHorizontal />
              <CardHorizontal />
            </LayoutStack>
          </LayoutStack>
        </Fragment>

        <Fragment slot="aside">
          <LayoutStack>
            <EmptyState />
            <Panel>
              <SectionHeader title="John Smith's Activity" />
            </Panel>
            <Panel>
              <SectionHeader title="Activity Monitor" />
            </Panel>
            <Panel>
              <SectionHeader title="Your Assignments" />
              <CalGrid />
              <ActivitySvg />
            </Panel>
            <Panel>
              <SectionHeader title="Your Schedule" />
            </Panel>
          </LayoutStack>

          <Fragment slot="playground">
            <section class="dump">playground</section>
            <SectionHeader />
            <SectionHeader align="left" title="Hey Dude" />
            <SectionHeader title="Hello World" hasRule />
            <SectionHeader title="Hello World" align="left" hasRule />
          </Fragment>
        </Fragment>
      </Resizer>

      {/* ================================== */}
      {/* Style                              */}
      {/* ================================== */}
      <style is:global>
        .dump {
          padding: 4rem;

          & + & {
            margin-top: 40px;
          }

          > * + * {
            margin-top: 40px;
          }
        }

        .grid--vertical {
          display: grid;
          gap: 0.8rem;
        }

        .grid--vertical--large {
          gap: 3rem;
        }

        .cal-grid--max {
          margin-inline: auto;
          inline-size: 100%;
          max-inline-size: 400px;
          position: relative;

          &::before {
            content: "For placement only";
            position: absolute;
            top: 50%;
            left: 25%;
            font-size: 12px;
            background-color: rgba(0, 0, 0, 0.6);
            padding-inline: 2rem;
          }
        }

        .top-area {
          max-inline-size: 80%;
          margin-inline: auto;
        }
      </style>
    </section>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    const updateToggles = document.querySelectorAll(".js-update-toggle");

    updateToggles.forEach((toggle) => {
      // const nearestLink = toggle.closest(".js-card__link");
      // console.log(nearestLink);
      // nearestLink.preventDefault();
      toggle.addEventListener("click", () => {
        const updatesList = toggle.nextElementSibling;

        if (updatesList && updatesList.classList.contains("js-updates-list")) {
          updatesList.classList.toggle("active");
        }
      });
    });
  });
</script>
